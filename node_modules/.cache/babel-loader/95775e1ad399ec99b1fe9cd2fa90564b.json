{"remainingRequest":"/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/node_modules/babel-loader/lib/index.js!/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/src/store/modules/user.js","dependencies":[{"path":"/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/src/store/modules/user.js","mtime":1634008506733},{"path":"/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1632304425990},{"path":"/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":1632304426592},{"path":"/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1632304426170}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB2YXIgdXNlck5hbWUgPSB1c2VySW5mby51c2VyTmFtZSwKICAgICAgICBwYXNzV29yZCA9IHVzZXJJbmZvLnBhc3NXb3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHsKICAgICAgICB1c2VyTmFtZTogdXNlck5hbWUudHJpbSgpLAogICAgICAgIHBhc3NXb3JkOiBwYXNzV29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIGRhdGEudG9rZW4pOwogICAgICAgIHNldFRva2VuKGRhdGEudG9rZW4pOwoKICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZWplY3QoZGF0YSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZXR1cm4gcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgICAgfQoKICAgICAgICB2YXIgX2RhdGEkID0gZGF0YVswXSwKICAgICAgICAgICAgdXNlck5hbWUgPSBfZGF0YSQudXNlck5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IF9kYXRhJC5hdmF0YXI7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIHVzZXJOYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/driedbambosh/code house/My-Blog/blog-border/vue-admin-template/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","userInfo","commit","userName","passWord","Promise","resolve","reject","trim","then","response","data","status","catch","error","res","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { userName, passWord } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ userName: userName.trim(), passWord: passWord }).then(response => {\n        const { data } = response\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        if(data.status == 200) {\n          resolve(data)\n        }else {\n          reject(data)\n        }\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n\n        const { userName, avatar } = data[0]\n        commit('SET_NAME', userName)\n        commit('SET_AVATAR', avatar)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then((res) => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve(res)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"]}]}